<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project 3 Problem Set 1: Starting Project 3 and working with panel data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ps_03_week_01_files/libs/clipboard/clipboard.min.js"></script>
<script src="ps_03_week_01_files/libs/quarto-html/quarto.js"></script>
<script src="ps_03_week_01_files/libs/quarto-html/popper.min.js"></script>
<script src="ps_03_week_01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ps_03_week_01_files/libs/quarto-html/anchor.min.js"></script>
<link href="ps_03_week_01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ps_03_week_01_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ps_03_week_01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ps_03_week_01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ps_03_week_01_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project 3 Problem Set 1: Starting Project 3 and working with panel data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="problem-set-overview" class="level2">
<h2 class="anchored" data-anchor-id="problem-set-overview">Problem Set Overview</h2>
<p>This problem set is intended to get you started on your third project for the course.</p>
<section id="the-question-the-data" class="level3">
<h3 class="anchored" data-anchor-id="the-question-the-data">The Question &amp; The Data</h3>
<p>Your question for project 3 should be in the form of: What is the association between <span class="math inline">\(x\)</span> (an explanatory variable) and <span class="math inline">\(y\)</span> (some outcome)? For this project, you will use the convenience store data (shopper_info, store_info, gtin) to select your <span class="math inline">\(y\)</span>, and choose <strong>one</strong> of the two additional datasets (census data or weather data) to choose your <span class="math inline">\(x\)</span>.</p>
<ul>
<li><p>Option 1: Convenience store data and <a href="https://www.census.gov/data/developers/data-sets/acs-5year.html">Demographic data from the US Census</a></p></li>
<li><p>Option 2: Convenience store data and <a href="https://csu-arec-330.github.io/materials/unit_03/inputs/gridmet_county_daily_2023-2023.csv.gz">Weather data from NOAA</a></p></li>
</ul>
</section>
<section id="building-your-panel-dataset" class="level3">
<h3 class="anchored" data-anchor-id="building-your-panel-dataset">Building your panel dataset</h3>
<p>Once you have the question in mind, you need to build the dataset. Building the dataset may look different depending on your question and the regression model you intend to estimate. For this problem set, you will practice building datasets using both the Census data and the weather data.</p>
<section id="part-1-using-census-data" class="level4">
<h4 class="anchored" data-anchor-id="part-1-using-census-data">Part 1: Using Census data</h4>
<ol type="1">
<li>In the lab, we loaded median income from the American Community Survey (ACS) Census data. For your problem set, find the table associated population. Then, create a new spatial dataframe that does the following:</li>
</ol>
<ul>
<li><p>Only includes the data for the 48 contiguous US states.</p></li>
<li><p>Joins population to the geocoded store data.</p></li>
<li><p>Calculates the population <em>density</em> (population per square miles). Note: You will need to refer to the <a href="https://www.census.gov/programs-surveys/geography/technical-documentation/records-layout/gaz-record-layouts.html#">Tiger Shapefile data dictionary</a> to determine what units <strong>aland</strong> is measured in and perform the necessary mutation. Tip: Refer back to the lab notes from Week 3.</p></li>
<li><p>Export the data to a csv file that can be read into Tableau.</p></li>
</ul>
<ol start="2" type="1">
<li>Generate a filled map in Tableau that plots county-level population density. Your final map should only include the data for the 48 contiguous US states. Note: We covered filled maps in Tableau in Week 10.</li>
</ol>
</section>
<section id="part-2-using-weather-data" class="level4">
<h4 class="anchored" data-anchor-id="part-2-using-weather-data">Part 2: Using weather data</h4>
<ol type="1">
<li><p>Read in the weather data and create a dataframe with the total monthly rainfall for each county. Tip: Refer back to the lab notes from Week 3.</p></li>
<li><p>Read in the shopper info data and create a dataframe that aggregates total sales across stores at the county-level by month. Note: There is only one month of data.</p></li>
<li><p>Join the dataframe from #1 (total precipitation) with the dataframe from #2 (total sales) and create a dataset where the unit of analysis is at the county level. Export the data into a csv file that can be read into Tableau.</p></li>
<li><p>Generate a map in Tableau that plots county-level total rainfall and total sales. You decide how best to display the data so that both pieces of information are portrayed effectively. Only include the data for the 48 contiguous US states.</p></li>
</ol>
</section>
</section>
<section id="project-3" class="level3">
<h3 class="anchored" data-anchor-id="project-3">Project 3</h3>
<ol type="1">
<li><p>Who are your Project 3 team members?</p></li>
<li><p>Indicate whether you are selecting Option 1 or Option 2, described above.</p></li>
<li><p>What is the relationship you want to examine?</p></li>
</ol>
</section>
</section>
<section id="how-to-submit" class="level2">
<h2 class="anchored" data-anchor-id="how-to-submit">How to Submit</h2>
<p>You should create a new webpage on your Google site titled <code>Project 3 Problem Set 1</code>. Your webpage should include the code you used to generate the data for the two maps, the two maps themselves, and responses to the questions, where pertinent. Submit the link to your Google site webpage in Canvas. You should work on building your own webpage, but only one member of the group needs to submit the link.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>